# 🧪 测试自动获取标题功能

## 📋 **测试步骤**

### **方法1: 使用测试页面**
1. 打开 http://localhost:3000/test-api
2. 在输入框中输入测试URL（如：https://www.baidu.com）
3. 点击"测试获取标题"按钮
4. 查看返回的结果

### **方法2: 浏览器控制台测试**
1. 打开 http://localhost:3000
2. 按F12打开开发者工具
3. 在控制台中运行以下代码：

```javascript
// 测试API调用
fetch('/api/fetch-title?url=https://www.baidu.com')
  .then(response => response.json())
  .then(data => {
    console.log('API返回结果:', data)
  })
  .catch(error => {
    console.error('API调用失败:', error)
  })
```

### **方法3: 测试添加书签功能**
1. 打开 http://localhost:3000
2. 点击顶部导航栏的"书签"按钮
3. 选择一个分类
4. 在网址输入框中输入：https://www.github.com
5. 观察标题字段是否自动填充
6. 查看浏览器控制台的调试信息

## 🔍 **预期结果**

### **成功情况**
- API返回格式：`{ "title": "网站标题", "url": "输入的URL" }`
- 控制台显示详细的获取过程日志
- 标题字段自动填充获取到的标题

### **失败情况**
- 如果网络获取失败，应该返回域名作为备选标题
- 控制台会显示错误信息和备选方案

## 🐛 **常见问题排查**

### **如果API不工作**
1. 检查开发服务器是否正常运行
2. 查看控制台是否有编译错误
3. 确认API文件路径正确：`app/api/fetch-title/route.ts`

### **如果标题不自动填充**
1. 检查浏览器控制台的网络请求
2. 查看是否有CORS错误
3. 确认URL格式是否正确（必须以http://或https://开头）

### **如果获取速度慢**
1. 检查网络连接
2. 某些网站可能响应较慢
3. API设置了5秒超时，超时后会使用域名作为备选

## 📝 **调试信息说明**

控制台会显示以下调试信息：
- `🔍 API调用 - 获取标题: [URL]`
- `✅ URL格式验证通过: [域名]`
- `🌐 开始获取网页内容...`
- `📄 网页响应状态: [状态码]`
- `📝 获取到HTML内容，长度: [字节数]`
- `🔍 开始提取标题...`
- `✅ 从<title>标签获取到标题: [标题]`
- `🎉 API返回结果: [结果对象]`

## 🎯 **测试建议**

### **推荐测试URL**
- https://www.baidu.com （中文网站）
- https://www.google.com （英文网站）
- https://github.com （技术网站）
- https://www.zhihu.com （问答网站）
- https://www.bilibili.com （视频网站）

### **测试场景**
1. **正常网站**：应该能正确获取标题
2. **慢速网站**：测试超时处理
3. **无效URL**：测试错误处理
4. **重定向网站**：测试重定向处理
5. **特殊字符**：测试HTML实体解码

---

**注意**：如果遇到问题，请查看开发服务器的控制台输出和浏览器的开发者工具，那里会有详细的调试信息。
